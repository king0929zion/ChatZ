package M2;

import A4.P;
import A4.Q;
import A4.V;
import A4.W;
import A4.g0;
import D.C0056a;
import D.C0091s;
import X2.C0696k;
import Y3.C;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import m4.AbstractC1276k;
import m4.C1288w;
import u4.AbstractC1776n;
import x4.AbstractC1888A;
import x4.AbstractC1898K;
import x4.AbstractC1939v;
import x4.t0;

/* loaded from: classes.dex */
public final class t {
    public static final c Companion = new Object();
    public final I2.g a;

    /* renamed from: b, reason: collision with root package name */
    public final I2.v f3398b;

    /* renamed from: c, reason: collision with root package name */
    public final ConcurrentHashMap f3399c;

    /* renamed from: d, reason: collision with root package name */
    public final g0 f3400d;

    /* renamed from: e, reason: collision with root package name */
    public final Q f3401e;

    /* renamed from: f, reason: collision with root package name */
    public final V f3402f;

    /* renamed from: g, reason: collision with root package name */
    public final P f3403g;

    /* renamed from: h, reason: collision with root package name */
    public final C4.c f3404h;

    /* renamed from: i, reason: collision with root package name */
    public final AbstractC1939v f3405i;

    public t(I2.g gVar, I2.v vVar) {
        AbstractC1276k.f(gVar, "sseClient");
        AbstractC1276k.f(vVar, "conversationRepository");
        this.a = gVar;
        this.f3398b = vVar;
        this.f3399c = new ConcurrentHashMap();
        g0 b5 = W.b(Y3.w.f9813c);
        this.f3400d = b5;
        this.f3401e = new Q(b5);
        V a = W.a(64, 5, null);
        this.f3402f = a;
        this.f3403g = new P(a);
        t0 e6 = AbstractC1888A.e();
        E4.e eVar = AbstractC1898K.a;
        E4.d dVar = E4.d.f1360f;
        this.f3404h = AbstractC1888A.c(Y4.d.P(e6, dVar));
        this.f3405i = dVar.g0(1);
    }

    /*  JADX ERROR: Types fix failed
        jadx.core.utils.exceptions.JadxOverflowException: Type inference error: updates count limit reached
        	at jadx.core.utils.ErrorsCounter.addError(ErrorsCounter.java:59)
        	at jadx.core.utils.ErrorsCounter.error(ErrorsCounter.java:31)
        	at jadx.core.dex.attributes.nodes.NotificationAttrNode.addError(NotificationAttrNode.java:19)
        	at jadx.core.dex.visitors.typeinference.FixTypesVisitor.visit(FixTypesVisitor.java:96)
        */
    /* JADX WARN: Unsupported multi-entry loop pattern (BACK_EDGE: B:80:0x042e -> B:34:0x0454). Please report as a decompilation issue!!! */
    public static final java.lang.Object a(M2.t r56, java.lang.String r57, java.lang.String r58, java.lang.String r59, java.util.List r60, java.util.List r61, java.lang.String r62, java.lang.String r63, float r64, float r65, java.lang.Integer r66, java.util.List r67, I2.w r68, X2.C0696k r69, d4.c r70) {
        /*
            Method dump skipped, instructions count: 2260
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: M2.t.a(M2.t, java.lang.String, java.lang.String, java.lang.String, java.util.List, java.util.List, java.lang.String, java.lang.String, float, float, java.lang.Integer, java.util.List, I2.w, X2.k, d4.c):java.lang.Object");
    }

    /* JADX WARN: Code restructure failed: missing block: B:24:0x017e, code lost:
    
        return r3;
     */
    /* JADX WARN: Code restructure failed: missing block: B:36:0x00b1, code lost:
    
        if (r15 != r4) goto L26;
     */
    /* JADX WARN: Code restructure failed: missing block: B:37:0x00b3, code lost:
    
        r13 = r13.f3286b;
        r11.f3343g = r0;
        r11.f3344h = r1;
        r11.f3345i = r2;
        r11.f3346j = r5;
        r11.f3347k = r6;
        r11.f3348l = r7;
        r11.f3349m = r8;
        r11.f3350n = r9;
        r11.f3351o = r10;
        r11.f3352p = r12;
        r11.f3354r = 2;
        r19 = r10;
        g(r19, r9, r1, r2, r5, r8, r13);
     */
    /* JADX WARN: Code restructure failed: missing block: B:38:0x00dd, code lost:
    
        if (r14 != r3) goto L25;
     */
    /* JADX WARN: Code restructure failed: missing block: B:40:0x00e8, code lost:
    
        throw new java.lang.RuntimeException();
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:15:0x00a1  */
    /* JADX WARN: Removed duplicated region for block: B:41:0x018c A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:48:0x007e  */
    /* JADX WARN: Removed duplicated region for block: B:8:0x0022  */
    /* JADX WARN: Unsupported multi-entry loop pattern (BACK_EDGE: B:18:0x00dd -> B:11:0x00e1). Please report as a decompilation issue!!! */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public static final java.lang.Object b(java.lang.StringBuilder r19, M2.t r20, java.util.List r21, java.lang.String r22, m4.C1287v r23, java.lang.String r24, java.util.List r25, java.lang.StringBuilder r26, m4.C1288w r27, java.util.List r28, d4.c r29) {
        /*
            Method dump skipped, instructions count: 398
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: M2.t.b(java.lang.StringBuilder, M2.t, java.util.List, java.lang.String, m4.v, java.lang.String, java.util.List, java.lang.StringBuilder, m4.w, java.util.List, d4.c):java.lang.Object");
    }

    /* JADX WARN: Removed duplicated region for block: B:15:0x0031  */
    /* JADX WARN: Removed duplicated region for block: B:8:0x0022  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public static final java.lang.Object c(M2.t r10, java.lang.String r11, java.util.List r12, X2.C0696k r13, java.util.List r14, d4.c r15) {
        /*
            r10.getClass()
            boolean r0 = r15 instanceof M2.m
            if (r0 == 0) goto L16
            r0 = r15
            M2.m r0 = (M2.m) r0
            int r1 = r0.f3357i
            r2 = -2147483648(0xffffffff80000000, float:-0.0)
            r3 = r1 & r2
            if (r3 == 0) goto L16
            int r1 = r1 - r2
            r0.f3357i = r1
            goto L1b
        L16:
            M2.m r0 = new M2.m
            r0.<init>(r10, r15)
        L1b:
            java.lang.Object r15 = r0.f3355g
            int r1 = r0.f3357i
            r2 = 1
            if (r1 == 0) goto L31
            if (r1 != r2) goto L29
            X3.a.e(r15)
            goto La8
        L29:
            java.lang.IllegalStateException r10 = new java.lang.IllegalStateException
            java.lang.String r11 = "call to 'resume' before 'invoke' with coroutine"
            r10.<init>(r11)
            throw r10
        L31:
            X3.a.e(r15)
            java.util.Iterator r15 = r12.iterator()
        L38:
            boolean r1 = r15.hasNext()
            r3 = 0
            if (r1 == 0) goto L86
            java.lang.Object r1 = r15.next()
            I2.E r1 = (I2.E) r1
            java.util.Iterator r4 = r14.iterator()
        L49:
            boolean r5 = r4.hasNext()
            if (r5 == 0) goto L6d
            java.lang.Object r5 = r4.next()
            L2.h r5 = (L2.h) r5
            java.lang.String r6 = r5.a
            java.lang.String r7 = r1.a
            boolean r6 = m4.AbstractC1276k.b(r6, r7)
            if (r6 != 0) goto L6e
            java.lang.String r5 = r5.f3085b
            java.lang.String r6 = r1.f2615b
            boolean r5 = m4.AbstractC1276k.b(r5, r6)
            if (r5 == 0) goto L6a
            goto L6e
        L6a:
            int r3 = r3 + 1
            goto L49
        L6d:
            r3 = -1
        L6e:
            if (r3 < 0) goto L38
            java.lang.Object r1 = r14.get(r3)
            r4 = r1
            L2.h r4 = (L2.h) r4
            r8 = 0
            r9 = 247(0xf7, float:3.46E-43)
            L2.i r5 = L2.i.f3093e
            r6 = 0
            r7 = 0
            L2.h r1 = L2.h.a(r4, r5, r6, r7, r8, r9)
            r14.set(r3, r1)
            goto L38
        L86:
            M2.a r15 = new M2.a
            r15.<init>(r14, r3)
            r10.i(r11, r15)
            E4.e r15 = x4.AbstractC1898K.a
            E4.d r15 = E4.d.f1360f
            M2.o r3 = new M2.o
            r9 = 0
            r7 = r10
            r8 = r11
            r4 = r12
            r5 = r13
            r6 = r14
            r3.<init>(r4, r5, r6, r7, r8, r9)
            r0.f3357i = r2
            java.lang.Object r15 = x4.AbstractC1888A.H(r15, r3, r0)
            c4.a r10 = c4.EnumC0927a.f11114c
            if (r15 != r10) goto La8
            return r10
        La8:
            java.util.List r15 = (java.util.List) r15
            return r15
        */
        throw new UnsupportedOperationException("Method not decompiled: M2.t.c(M2.t, java.lang.String, java.util.List, X2.k, java.util.List, d4.c):java.lang.Object");
    }

    /* JADX WARN: Removed duplicated region for block: B:13:0x007e A[Catch: Exception -> 0x0031, TRY_ENTER, TRY_LEAVE, TryCatch #0 {Exception -> 0x0031, blocks: (B:11:0x002d, B:13:0x007e, B:20:0x003f, B:22:0x0047, B:24:0x004f, B:27:0x0058), top: B:7:0x0027 }] */
    /* JADX WARN: Removed duplicated region for block: B:19:0x003c  */
    /* JADX WARN: Removed duplicated region for block: B:9:0x0029  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public static final java.lang.Object d(M2.t r14, java.lang.String r15, java.lang.String r16, M2.A r17, boolean r18, d4.c r19) {
        /*
            r0 = r17
            r1 = r19
            r14.getClass()
            boolean r2 = r1 instanceof M2.p
            if (r2 == 0) goto L1a
            r2 = r1
            M2.p r2 = (M2.p) r2
            int r3 = r2.f3374j
            r4 = -2147483648(0xffffffff80000000, float:-0.0)
            r5 = r3 & r4
            if (r5 == 0) goto L1a
            int r3 = r3 - r4
            r2.f3374j = r3
            goto L1f
        L1a:
            M2.p r2 = new M2.p
            r2.<init>(r14, r1)
        L1f:
            java.lang.Object r1 = r2.f3372h
            int r3 = r2.f3374j
            r4 = 0
            X3.y r5 = X3.y.a
            r6 = 1
            if (r3 == 0) goto L3c
            if (r3 != r6) goto L34
            boolean r14 = r2.f3371g
            X3.a.e(r1)     // Catch: java.lang.Exception -> L31
            goto L7c
        L31:
            r0 = move-exception
            r14 = r0
            goto L89
        L34:
            java.lang.IllegalStateException r14 = new java.lang.IllegalStateException
            java.lang.String r0 = "call to 'resume' before 'invoke' with coroutine"
            r14.<init>(r0)
            throw r14
        L3c:
            X3.a.e(r1)
            java.lang.String r1 = r0.f3269b     // Catch: java.lang.Exception -> L31
            int r1 = r1.length()     // Catch: java.lang.Exception -> L31
            if (r1 != 0) goto L58
            java.util.List r1 = r0.f3270c     // Catch: java.lang.Exception -> L31
            boolean r1 = r1.isEmpty()     // Catch: java.lang.Exception -> L31
            if (r1 == 0) goto L58
            java.util.List r1 = r0.f3271d     // Catch: java.lang.Exception -> L31
            boolean r1 = r1.isEmpty()     // Catch: java.lang.Exception -> L31
            if (r1 == 0) goto L58
            goto L88
        L58:
            I2.v r8 = r14.f3398b     // Catch: java.lang.Exception -> L31
            java.lang.String r10 = r0.f3269b     // Catch: java.lang.Exception -> L31
            java.util.List r7 = r0.f3270c     // Catch: java.lang.Exception -> L31
            java.lang.Long r11 = r0.f3275h     // Catch: java.lang.Exception -> L31
            java.util.List r12 = r0.f3271d     // Catch: java.lang.Exception -> L31
            r14 = r18
            r2.f3371g = r14     // Catch: java.lang.Exception -> L31
            r2.f3374j = r6     // Catch: java.lang.Exception -> L31
            r8.getClass()     // Catch: java.lang.Exception -> L31
            I2.q r6 = new I2.q     // Catch: java.lang.Exception -> L31
            r13 = 0
            r9 = r16
            r6.<init>(r7, r8, r9, r10, r11, r12, r13)     // Catch: java.lang.Exception -> L31
            java.lang.Object r0 = r8.c(r2, r6)     // Catch: java.lang.Exception -> L31
            c4.a r1 = c4.EnumC0927a.f11114c
            if (r0 != r1) goto L7c
            return r1
        L7c:
            if (r14 == 0) goto L88
            androidx.lifecycle.N r14 = i5.a.a     // Catch: java.lang.Exception -> L31
            java.lang.Object[] r0 = new java.lang.Object[r4]     // Catch: java.lang.Exception -> L31
            r14.getClass()     // Catch: java.lang.Exception -> L31
            androidx.lifecycle.N.k(r0)     // Catch: java.lang.Exception -> L31
        L88:
            return r5
        L89:
            androidx.lifecycle.N r0 = i5.a.a
            r14.getMessage()
            java.lang.Object[] r14 = new java.lang.Object[r4]
            r0.getClass()
            androidx.lifecycle.N.p(r14)
            return r5
        */
        throw new UnsupportedOperationException("Method not decompiled: M2.t.d(M2.t, java.lang.String, java.lang.String, M2.A, boolean, d4.c):java.lang.Object");
    }

    public static void e(List list, f fVar, String str) {
        if (AbstractC1776n.Q(str)) {
            return;
        }
        d dVar = (d) Y3.m.x0(list);
        if (dVar == null || dVar.a != fVar) {
            list.add(new d(fVar, new StringBuilder(str)));
        } else {
            dVar.f3281b.append(str);
        }
    }

    public static final X3.y g(C1288w c1288w, StringBuilder sb, t tVar, List list, String str, List list2, String str2) {
        int length = str2.length();
        X3.y yVar = X3.y.a;
        if (length == 0) {
            return yVar;
        }
        if (c1288w.f12973c == null) {
            c1288w.f12973c = new Long(System.currentTimeMillis());
        }
        sb.append(str2);
        tVar.getClass();
        e(list, f.f3284e, str2);
        tVar.i(str, new C0091s(list2, sb, c1288w, 7));
        return yVar;
    }

    public final void f(String str) {
        AbstractC1276k.f(str, "conversationId");
        z zVar = (z) this.f3399c.remove(str);
        if (zVar != null) {
            i(str, new C0056a(zVar, 13));
            zVar.a.f(null);
        }
    }

    public final void h(String str, String str2, String str3, List list, List list2, String str4, String str5, float f6, float f7, Integer num, List list3, I2.w wVar, C0696k c0696k) {
        AbstractC1276k.f(str, "conversationId");
        AbstractC1276k.f(str2, "messageId");
        AbstractC1276k.f(str3, "question");
        AbstractC1276k.f(list, "images");
        AbstractC1276k.f(list2, "history");
        AbstractC1276k.f(list3, "tools");
        AbstractC1276k.f(wVar, "requestConfig");
        f(str);
        this.f3399c.put(str, new z(AbstractC1888A.y(this.f3404h, null, new s(this, str, str2, str3, list, list2, str4, str5, f6, f7, num, list3, wVar, c0696k, null), 3), str2));
    }

    public final void i(String str, l4.c cVar) {
        g0 g0Var;
        Object value;
        Map map;
        do {
            g0Var = this.f3400d;
            value = g0Var.getValue();
            Map map2 = (Map) value;
            A a = (A) map2.get(str);
            if (a == null) {
                a = new A(null, 511);
            }
            Object f6 = cVar.f(a);
            X3.i iVar = new X3.i(str, f6);
            if (map2.isEmpty()) {
                map = C.I(iVar);
            } else {
                LinkedHashMap linkedHashMap = new LinkedHashMap(map2);
                linkedHashMap.put(str, f6);
                map = linkedHashMap;
            }
        } while (!g0Var.j(value, map));
    }
}
